//A health display, in the style of hearts. One hitpoint is half a heart.
{
	id: "text_writer",
	is_strict: true,
	use_absolute_screen_coordinates: true,
	#hidden_in_game: true,
	serializable: false,
	
	zorder: "@include data/zorder.cfg:in_front_of_everything",

	properties: {
		//target: { type: "custom_obj" },
		target: "custom_obj <- lp asserting lp where lp = level.local_player",

		buffer: { type: 'string', default: '' },
		display: { type: 'string', default: '' },
		font: { type: 'string', default: 'script' },
		
	    tail: "def(string input) -> string
			if(input != '', input[:size(input)-1], input)", // Drop last element
		behead: "def(string input) -> string
			input[1:]",             // Drop first
	},
	
	timer_frequency: 3,
	on_timer: "if(buffer != '', [
		set(display, display + buffer[0:1]),
		set(buffer, behead(buffer))
		] )",

	on_process: "text(display, font)",
	on_create: "set(buffer, 'Hello\nWorld\nHello\nWorldHello\nWorld\nHello')",

	/*on_create: "set_widgets(
			widget(me, {
				type: 'image', 
				image: 'gui/hud3.png', 
				area: [33,1,49,17], 
				x: 0, 
				y: 0,
			})
		)"*/
}
